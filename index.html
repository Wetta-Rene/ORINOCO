<!DOCTYPE html>

<html lang="fr">
    <head>
        <meta charset="utf-8" />
        <link type="text/css" rel="stylesheet" href="css/styles.css" />
        <script src="js/scripts.js"></script>
        <title>ORINOCO - Accueil Catalogue</title>
   </head>

<body>
<header><img src="images/logoOrinoco.png" ></header>
<nav id="header">
    <div id="messagePanier"></div>
</nav>
<h1 id="baliseH1"></h1>      
<section id="resultats">
 
</section>
<script>
////////////////////////////////////////////////////// AFFICHAGE CONTENU DU HEADER ////////////////////////////////////////////////////
var contenuHeader = fonctionAffichageHeader();
document.getElementById("header").innerHTML = contenuHeader; 
///////////////////////////////////////////////////////////  END /////////////////////////////////////////////////////////////////
    
    
/*requette XML vers le backend pour la page index.html */

    /*nettoyage du div en cas de remplissage avant*/
    document.getElementById("resultats").innerHTML = "";
    var catalogue = "teddies"; // ici on peut changer de catalogue
    

    
    var xhttp;
    xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function () {
        if (this.readyState == 4 && this.status == 200) {
            var response = JSON.parse(this.responseText);

            var Resultats = document.getElementById("resultats"); //affichage dans id > resultats
            //////////////////// SWITCH TITRE DE LA PAGE EN FONCTION DE LA REQUETTE////////////////
            /*var contenuH1 = "";
            switch (catalogue){
                case "teddies":
                    contenuH1 = "LES NOUNOURS";
                     break;
                    case "cameras":
                     contenuH1 = "LES CAMERAS VINTAGE";
                     break;
                    case "furniture":
                     contenuH1 = "LES MEUBLES ANCIENS";
                     break;
            }
            console.log(contenuH1)
            document.getElementById(baliseH1).innerHTML = contenuH1;*/
      //////////////// END /////////////////
            
            for (var i = 0; i < response.length; i++){
                var objet = response[i];
                

                var article = '<article class="containerArticle"><div class="elementContainerArticle"><img src="'+ objet.imageUrl +'" ></div><div class="elementContainerArticle"><div class="contentDescriptionArticle"><h2>'+ objet.name +'</h2><div class="textDescription">'+ objet.description +'</div><div class="divPrix">Prix: '+ objet.price +' Euro</div><div class="lienPageCustomArticle"><button class="bouton"><a href="produit.html?catalogue='+catalogue+'&produit='+objet._id+'">> Personnalis√© ce produit</a></button></div></div></div></article>';

                // affichage des differents article
                Resultats.innerHTML += article;      

            }
            
        }//fin du if readyState
    };
    xhttp.open("GET", "http://localhost:3000/api/"+catalogue, true);
    xhttp.send();
    

</script>



</body>
<footer>
</footer>
</html>