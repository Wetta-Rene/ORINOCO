<!DOCTYPE html>

<html lang="fr">
    <head>
        <meta charset="utf-8" />
        <link type="text/css" rel="stylesheet" href="css/styles.css" />
        <script src="js/scripts.js"></script>
        <title>ORINOCO - Accueil</title>
    </head>

<body>
<header>


    <div id="href"></div>
</header>
    
<script type="text/javascript">
const queryString = window.location.search; //recupere l'url
const urlParams = new URLSearchParams(queryString); //recupere apres le ? de l'url
const catalogue = urlParams.get('catalogue') //recupere catalogue
const produit = urlParams.get('produit') // recupere produit

    //création du lien retour de la page
    var link = '<a href="index.html?catalogue='+catalogue+'"/> << Retour page du catalogue</a>';
    console.log(link);
   
   
    /*recherche de l'article dans la base JSON */
    var xhttp;
    if (catalogue == "") {
        document.getElementById("resultats").innerHTML = "Pas de données, merci de revenir à la page précédente !!";
    }
    xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function () {
        if (this.readyState == 4 && this.status == 200) {
            var response = JSON.parse(this.responseText);
                for (var i = 0; i < response.length; i++) {
                    if (response[i]._id === produit) {
                       var objet = response[i];
         
                for (var j = 0; j < objet.colors.length; j++){
                    var choix = '<option value="'+objet.colors[j]+'">'+objet.colors[j]+'</option>'
                }
                      
                        
      var article = '<article class="containerArticle"><div class="elementContainerArticle"><img src="'+ objet.imageUrl +'" ></div><div class="elementContainerArticle"><div class="contentDescriptionArticle"><h2>'+ objet.name +'</h2><div class="textDescription">'+ objet.description +'</div><div class="divPrix">Prix: '+ objet.price +' Euro</div><div id="selectOptionProduit"><form methode="GET"><select name="option" id="select">' + += choix + '</select><input type="submit" value="Mettre dans le panier" class="boutonSubmit"/></form></div></div></div></div></article>';
                     
                    }
                }

            
            var affichageChoixArticle = document.getElementById("select"); 
            var affichageArticleUnique = document.getElementById("articleSeul");
            var affichageLink = document.getElementById("href");
                
                
              

                /*affichage des differents article*/
                affichageArticleUnique.innerHTML = article;  
                affichageChoixArticle.innerHTML += choix;
                affichageLink.innerHTML = link;

            }
            
        };//fin du if readyState
    xhttp.open("GET", "http://localhost:3000/api/" + catalogue, true);
    xhttp.send();

</script>

<section id="articleSeul">

</section>
</body>
<footer>
</footer>
</html>